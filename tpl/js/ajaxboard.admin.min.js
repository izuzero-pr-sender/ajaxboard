/**
 * AJAXBoard XE Module Javascript
 * Copyright (C) 아약스보드. All rights reserved.
 **/
!function(t){AJAXBoardAdmin=xe.createApp("AJAXBoardAdmin",{init:function(t){this.request_uri=t},connect:function(){if(!this.token||!this.server_uri)return this;var t=buildQuery({token:this.token,respond:!0});return this.socket=io(this.server_uri,{query:t,reconnectionAttempts:10}),this.bindListeners()},bindListeners:function(){if(!this.socket)return this;return this.socket.on("connect",function(){t("#ajaxboard #status").html(xe.lang.msg_connected)}),this.socket.on("error",function(e){t("#ajaxboard #status").html(e)}),this.socket.on("reconnect_error",function(){t("#ajaxboard #status").html(xe.lang.msg_connection_failed)}),this.socket.on("reconnect_failed",function(){t("#ajaxboard #status").html(xe.lang.msg_connection_failed)}),this},procAjax:function(e,n,o,i,r,a){r=r?r.toUpperCase():r="GET",a=a?a.toLowerCase():a="html";var s;switch(a){case"html":s="text/html";break;case"json":case"jsonp":s="application/json";break;case"xml":s="application/xml";break;default:s="text/plain"}return i=t.isPlainObject(i)?i:{},i.mid=this.current_mid,n&&(i.module=n),o&&(i.act=o),i={url:e,type:r,dataType:a,contentType:s,data:i,global:!1,timeout:this.timeout},t.ajax(i)},getWholeVariablesHandler:function(){return this.procAjax(this.request_uri,"ajaxboard","getAjaxboardAdminVariables",null,"POST","json")},setWholeVariables:function(){var e=this,n=this.getWholeVariablesHandler();return n.done(function(n){t.extend(xe.lang,n.lang),e.timeout=n.timeout,e.server_uri=n.server_uri,e.token=n.token}).fail(function(t,e,n){try{console.error("%s: %s, %o",e,n,t)}catch(o){}}),n}})}(jQuery),jQuery(function(){oAJAXBoardAdmin=new AJAXBoardAdmin(request_uri),xe.registerApp(oAJAXBoardAdmin),oAJAXBoardAdmin.setWholeVariables().done(function(){oAJAXBoardAdmin.connect()})});